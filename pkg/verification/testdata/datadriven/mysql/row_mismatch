#
# Throw in all the common types and compare them.
#

exec all
CREATE TABLE test_table (
    id INT4,
    id_b INT4 DEFAULT 0,
    int2_test INT2 DEFAULT 1,
    int4_test INT4 DEFAULT 1,
    int8_test INT8 DEFAULT -1,
    float4_test FLOAT4 DEFAULT -1.5,
    float8_test FLOAT8 DEFAULT 434343,
    date_test DATE DEFAULT '2020-09-11',
    text_test TEXT,
    varchar_test VARCHAR(3) DEFAULT 'e',
    PRIMARY KEY (id, id_b)
)
----
[truth] 0 rows affected
[lie] CREATE TABLE

exec all
INSERT INTO test_table (id) VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10);
----
[truth] 10 rows affected
[lie] INSERT 0 10

verify
----
[STATUS] starting verify on public.test_table, shard 1/1
[STATUS] finished row verification on public.test_table (shard 1/1): truth rows seen: 10, success: 10, missing: 0, mismatch: 0, extraneous: 0

exec all
DROP TABLE test_table
----
[truth] 0 rows affected
[lie] DROP TABLE

# All the slightly differently named tables.
exec source_of_truth
CREATE TABLE test_table (
    tinyint_test INT1 DEFAULT 1,
    id INT4 PRIMARY KEY,
    ts_table TIMESTAMP NOT NULL DEFAULT '2020-01-02 19:18:17',
    dt_table DATETIME NOT NULL DEFAULT '2020-01-02 19:18:17'
)
----
[truth] 0 rows affected

exec non_source_of_truth
CREATE TABLE test_table (
    id INT8 PRIMARY KEY,
    tinyint_test INT4 DEFAULT 1,
    ts_table TIMESTAMPTZ NOT NULL DEFAULT '2020-01-02 19:18:17',
    dt_table TIMESTAMP NOT NULL DEFAULT '2020-01-02 19:18:17'
)
----
[lie] CREATE TABLE

exec all
INSERT INTO test_table (id) VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10);
----
[truth] 10 rows affected
[lie] INSERT 0 10

verify
----
[STATUS] starting verify on public.test_table, shard 1/1
[STATUS] finished row verification on public.test_table (shard 1/1): truth rows seen: 10, success: 10, missing: 0, mismatch: 0, extraneous: 0

exec all
DROP TABLE test_table
----
[truth] 0 rows affected
[lie] DROP TABLE
